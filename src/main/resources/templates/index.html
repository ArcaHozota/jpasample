<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>GlobalCityList</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--フレームワークjQueryを導入-->
	<script type="text/javascript" th:src="@{/static/jquery/jquery-3.6.2.min.js}"></script>
	<!--フレームワークBootstrapを導入-->
	<link rel="shortcut icon" type="image/png" th:href="@{/static/favicon.png}">
	<link rel="stylesheet" type="text/css" th:href="@{/static/bootstrap/css/bootstrap.min.css}">
	<script type="text/javascript" th:src="@{/static/bootstrap/js/bootstrap.min.js}"></script>
</head>

<body>
	<!-- ウェブページを構築する -->
	<div th:class="'container'">
		<!-- タイトル -->
		<div th:class="'row'">
			<div th:class="'col-lg-12'">
				<h1>グローバル都市情報一覧</h1>
			</div>
		</div>
		<!-- 検索バーとボタン -->
		<div class="row">
			<form class="form-inline col-lg-7" role="form">
				<div class="form-group has-feedback" style="width:50%;">
					<div class="input-group" style="width:100%;">
						<label for="keywordInput" class="input-group-addon">@</label>
						<input id="keywordInput" class="form-control has-success" type="text"
							placeholder="検索条件を入力してください">
					</div>
				</div>
				<button type="button" class="btn btn-warning" id="searchBtn">
					<span class="glyphicon glyphicon-search"></span>検索
				</button>
			</form>
			<div class="col-lg-2 col-lg-offset-3">
				<button id="cityAddModalBtn" class="btn btn-success">
					<span class="glyphicon glyphicon-pawn"></span>情報追加
				</button>
			</div>
		</div>
		<!-- データ -->
		<div th:class="'row'">
			<div th:class="'col-lg-12'">
				<table class="table table-condensed">
					<thead>
						<tr class="active">
							<th scope="col" th:class="'text-center'" th:style="'width:70px;'">都市ID</th>
							<th scope="col" th:class="'text-center'" th:style="'width:120px;'">都市名</th>
							<th scope="col" th:class="'text-center'" th:style="'width:100px;'">大陸</th>
							<th scope="col" th:class="'text-center'" th:style="'width:100px;'">国家</th>
							<th scope="col" th:class="'text-center'" th:style="'width:120px;'">地域</th>
							<th scope="col" th:class="'text-center'" th:style="'width:70px;'">人口数量</th>
							<th scope="col" th:class="'text-center'" th:style="'width:80px;'">公用語</th>
							<th scope="col" th:class="'text-center'" th:style="'width:120px;'">操作</th>
						</tr>
					</thead>
					<tbody id="cityTableMain">
						<tr th:each="pg:${extend.pageInfo.getContent()}">
							<td th:text="${pg.id()}" th:class="'text-center'" th:style="'width:70px;'"></td>
							<td th:text="${pg.name()}" th:class="'text-center'"
								th:style="${pg.name().trim().length() ge 15 ? 'width:120px;font-size:12px;':'width:120px;font-size:15px;'}">
							</td>
							<td th:text="${pg.continent()}" th:class="'text-center'" th:style="'width:100px;'"></td>
							<td th:text="${pg.nation()}" th:class="'text-center'"
								th:style="${pg.nation().trim().length() ge 15 ? 'width:120px;font-size:12px;':'width:120px;font-size:15px;'}">
							</td>
							<td th:text="${pg.district()}" th:class="'text-center'"
								th:style="${pg.district().trim().length() ge 15 ? 'width:120px;font-size:12px;':'width:120px;font-size:15px;'}">
							</td>
							<td th:text="${pg.population()}" th:class="'text-center'" th:style="'width:70px;'"></td>
							<td th:text="${pg.language()}" th:class="'text-center'"
								th:style="${pg.language().trim().length() ge 15 ? 'width:80px;font-size:12px;':'width:80px;font-size:15px;'}">
							</td>
							<td th:class="'text-center'" th:style="'width:120px;'">
								<button th:class="'btn btn-primary btn-sm edit_btn'" th:id="*{pg.id()}">
									<span th:class="'glyphicon glyphicon-pencil'"></span>編集
								</button>
								<button th:class="'btn btn-danger btn-sm delete_btn'" th:id="*{pg.name()}"
									th:deleteId="*{pg.id()}">
									<span th:class="'glyphicon glyphicon-trash'"></span>削除
								</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<!-- ページナビ -->
		<div th:class="'row'">
			<div th:class="'col-lg-5'"
				th:text="|The ${extend.pageInfo.getNumber()+1} page in ${extend.pageInfo.getTotalPages()} pages, ${extend.pageInfo.getTotalElements()} records found.|">
			</div>
			<nav th:class="'col-lg-7'"
				th:with="previousPage=${extend.pageInfo.getNumber()},nextPage=${extend.pageInfo.getNumber()+2},totalPg=${extend.pageInfo.getTotalPages()}">
				<ul th:class="'pagination'">
					<li><a th:href="@{'/jpasample/city?pageNum=1&amp;keyword='+${extend.keyword eq null ? '' : extend.keyword}}"
							th:class="${extend.pageInfo.isFirst() ? 'disabled' : 'enable'}">最初のページへ</a>
					</li>
					<li><a th:href="@{'/jpasample/city?pageNum='+${previousPage &lt; 1 ? 1 : previousPage}+'&amp;keyword='+${extend.keyword eq null ? '' : extend.keyword}}"
							th:class="${extend.pageInfo.hasPrevious() ? 'enable' : 'disabled'}">&laquo;</a>
					</li>
					<li th:each="i:${#numbers.sequence(extend.pageFirstIndex,extend.pageLastIndex)}"
						th:class="${extend.pageInfo.getNumber()} eq ${i} ? 'pagination active' : 'pagination enable'">
						<a th:text="${i+1}"
							th:href="@{'/jpasample/city?pageNum='+${i+1}+'&amp;keyword='+${extend.keyword eq null ? '' : extend.keyword}}"></a>
					</li>
					<li><a th:href="@{'/jpasample/city?pageNum='+${nextPage > totalPg ? totalPg : nextPage}+'&amp;keyword='+${extend.keyword eq null ? '' : extend.keyword}}"
							th:class="${extend.pageInfo.hasNext() ? 'enable' : 'disabled'}">&raquo;</a>
					</li>
					<li><a th:href="@{'/jpasample/city?pageNum='+${totalPg}+'&amp;keyword='+${extend.keyword eq null ? '' : extend.keyword}}"
							th:class="${extend.pageInfo.isLast() ? 'disabled' : 'enable'}">最後のページへ</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
	<!-- データ追加モーダル -->
	<div th:class="'modal fade'" th:id="'cityAddModal'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div th:class="'modal-dialog'" th:role="'document'">
			<div th:class="'modal-content'">
				<div th:class="'modal-header'">
					<button th:type="'button'" th:class="'close'" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
					<h4 th:class="'modal-title'">都市情報追加</h4>
				</div>
				<div th:class="'modal-body'">
					<form th:class="'form-horizontal'">
						<div th:class="'form-group'">
							<label for="nameInput" th:class="'col-sm-2 control-label'">都市名</label>
							<div th:class="'col-sm-10'">
								<input th:type="'text'" th:class="'form-control'" id="nameInput"
									th:placeholder="'都市の正式的な名称'"> <span th:class="'help-block'"></span>
							</div>
						</div>
						<div th:class="'form-group'">
							<label for="continentInput" th:class="'col-sm-2 control-label'">大陸</label>
							<div th:class="'col-sm-5'">
								<select id="continentInput" th:class="'form-control'" th:name="'continent'"></select>
							</div>
						</div>
						<div th:class="'form-group'">
							<label for="nationInput" th:class="'col-sm-2 control-label'">国家</label>
							<div th:class="'col-sm-5'">
								<select id="nationInput" th:class="'form-control'" th:name="'nation'"></select>
							</div>
						</div>
						<div th:class="'form-group'">
							<label for="districtInput" th:class="'col-sm-2 control-label'">地域</label>
							<div th:class="'col-sm-10'">
								<input th:type="'text'" th:class="'form-control'" id="districtInput"
									th:placeholder="'都市の地域'"> <span th:class="'help-block'"></span>
							</div>
						</div>
						<div th:class="'form-group'">
							<label for="populationInput" th:class="'col-sm-2 control-label'">人口数量</label>
							<div th:class="'col-sm-10'">
								<input th:type="'text'" th:class="'form-control'" id="populationInput"
									th:placeholder="'都市の人口数量'"> <span th:class="'help-block'"></span>
							</div>
						</div>
					</form>
				</div>
				<div th:class="'modal-footer'">
					<button th:type="'button'" th:class="'btn btn-primary'" th:id="'infoSaveBtn'">保存</button>
				</div>
			</div>
		</div>
	</div>
	<!-- データ編集モーダル -->
	<div th:class="'modal fade'" th:id="'cityEditModal'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div th:class="'modal-dialog'" th:role="'document'">
			<div th:class="'modal-content'">
				<div th:class="'modal-header'">
					<button th:type="'button'" th:class="'close'" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
					<h4 th:class="'modal-title'">都市情報修正</h4>
				</div>
				<div th:class="'modal-body'">
					<form th:class="'form-horizontal'">
						<div th:class="'form-group'">
							<label th:class="'col-sm-2 control-label'">都市名</label>
							<div th:class="'col-sm-10'">
								<p th:id="'cityEdit'" th:class="'form-control-static'"></p>
							</div>
						</div>
						<div th:class="'form-group'">
							<label th:class="'col-sm-2 control-label'">大陸</label>
							<div th:class="'col-sm-5'">
								<p th:id="'continentEdit'" th:class="'form-control-static'"></p>
							</div>
						</div>
						<div th:class="'form-group'">
							<label for="nationEdit" th:class="'col-sm-2 control-label'">国家</label>
							<div th:class="'col-sm-5'">
								<select id="nationEdit" th:class="'form-control'" th:name="'nation'"></select>
							</div>
						</div>
						<div th:class="'form-group'">
							<label th:class="'col-sm-2 control-label'">公用語</label>
							<div th:class="'col-sm-5'">
								<p th:id="'languageEdit'" th:class="'form-control-static'"></p>
							</div>
						</div>
						<div th:class="'form-group'">
							<label for="districtEdit" th:class="'col-sm-2 control-label'">地域</label>
							<div th:class="'col-sm-10'">
								<input th:type="'text'" th:name="'district'" th:class="'form-control'"
									id="districtEdit"> <span th:class="'help-block'"></span>
							</div>
						</div>
						<div th:class="'form-group'">
							<label for="populationEdit" th:class="'col-sm-2 control-label'">人口数量</label>
							<div th:class="'col-sm-10'">
								<input th:type="'text'" th:name="'population'" th:class="'form-control'"
									id="populationEdit"> <span th:class="'help-block'"></span>
							</div>
						</div>
					</form>
				</div>
				<div th:class="'modal-footer'">
					<button th:type="'button'" th:class="'btn btn-info'" th:id="'infoChangeBtn'">変更</button>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript" th:src="@{/static/jquery/cities.js}"></script>
</body>

</html>